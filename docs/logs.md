Logs
----

There are some log files generated by the applications running on AEM environments. They are available as [CloudWatch Log Streams](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/Working-with-log-groups-and-streams.html) on AMIs built by [Packer AEM](https://github.com/shinesolutions/packer-aem), which can be disabled by setting Packer AEM's [`aws.install_cloudwatchlogs` configuration property](https://github.com/shinesolutions/packer-aem/blob/master/docs/configuration.md#aws-platform-type-configuration-properties) value to `false`.

The tables below are handy when you need to troubleshoot directly on the EC2 instances, or as a configuration reference when you have to stream the logs to another system such as [Splunk](http://docs.splunk.com/Documentation/Forwarder/7.1.2/Forwarder/Abouttheuniversalforwarder).

### Provisioning logs

| Log Path | Description | Components |
|----------|-------------|------------|
| /var/log/shinesolutions/puppet-stack-init.log | Puppet log of AEM provisioning steps executed during cloud-init. | All |
| /var/log/shinesolutions/custom-stack-init-pre-common.log | Log of custom stack provisioning pre-common steps executed during cloud-init. | All, when [Custom Stack Provisioner](https://github.com/shinesolutions/aem-aws-stack-builder/blob/master/docs/customisation-points.md#custom-stack-provisioner) is provided. |
| /var/log/shinesolutions/custom-stack-init-post-common.log | Log of custom stack provisioning post-common steps executed during cloud-init. | All, when [Custom Stack Provisioner](https://github.com/shinesolutions/aem-aws-stack-builder/blob/master/docs/customisation-points.md#custom-stack-provisioner) is provided. |
| /var/log/shinesolutions/puppet-deploy-artifacts-init.log | Puppet log of Dispatcher Config artifacts deployment. | author-dispatcher, publish-dispatcher, author-publish-dispatcher |

### Application logs

#### AEM Author

| Log Path | Description | Components |
|----------|-------------|------------|
| /opt/aem/author/crx-quickstart/logs/error.log | AEM Author application log file. | author-primary, author-standby, author-publish-dispatcher |
| /opt/aem/author/crx-quickstart/logs/access.log | AEM Author access log file. | author-primary, author-standby, author-publish-dispatcher |
| /opt/aem/author/crx-quickstart/logs/request.log | AEM Author request log file. | author-primary, author-standby, author-publish-dispatcher |
| /opt/aem/author/crx-quickstart/logs/audit.log | AEM Author audit log file. | author-primary, author-standby, author-publish-dispatcher |

#### AEM Publish

| Log Path | Description | Components |
|----------|-------------|------------|
| /opt/aem/publish/crx-quickstart/logs/error.log | AEM Publish application log file. | publish, author-publish-dispatcher |
| /opt/aem/publish/crx-quickstart/logs/access.log | AEM Publish access log file. | publish, author-publish-dispatcher |
| /opt/aem/publish/crx-quickstart/logs/request.log | AEM Publish request log file. | publish, author-publish-dispatcher |
| /opt/aem/publish/crx-quickstart/logs/audit.log | AEM Publish audit log file. | publish, author-publish-dispatcher |

#### AEM Author-Dispatcher/Publish-Dispatcher (Apache httpd)

| Log Path | Description | Components |
|----------|-------------|------------|
| /var/log/httpd/access_log | Apache httpd access log file. | author-dispatcher, publish-dispatcher, author-publish-dispatcher |
| /var/log/httpd/default_error.log | Apache httpd error log file. | author-dispatcher, publish-dispatcher, author-publish-dispatcher |
| /var/log/httpd/dispatcher.log | AEM Dispatcher log file. | author-dispatcher, publish-dispatcher, author-publish-dispatcher |

#### AEM Orchestrator

| Log Path | Description | Components |
|----------|-------------|------------|
| /opt/shinesolutions/aem-orchestrator/orchestrator.log | [AEM Orchestrator](https://github.com/shinesolutions/aem-orchestrator) log file. | orchestrator |

#### Chaos Monkey

| Log Path | Description | Components |
|----------|-------------|------------|
| /var/log/tomcat/simianarmy.log | [Simian Army](https://medium.com/netflix-techblog/the-netflix-simian-army-16e57fbab116) log file. | chaos-monkey |

### Cron logs

| Log Path | Description | Components |
|----------|-------------|------------|
| /var/log/shinesolutions/cron-content-health-check.log | Log file of scheduled content health check task. | publish-dispatcher, author-publish-dispatcher |
| /var/log/shinesolutions/cron-export-backups.log | Log file of scheduled AEM Package export backup task. | author-primary, publish |
| /var/log/shinesolutions/cron-live-snapshot-backup.log | Log file of scheduled live snapshot backup task. | author-primary, publish |
| /var/log/shinesolutions/cron-stack-offline-snapshot.log | Log file of scheduled offline snapshot task. | orchestrator |
| /var/log/shinesolutions/cron-stack-offline-compaction-snapshot.log | Log file of scheduled offline compaction and snapshot task. | orchestrator |

### SSM logs

| Log Path | Description | Components |
|----------|-------------|------------|
| /var/lib/amazon/ssm/<instance_id>/document/orchestration/<execution_id>/awsrunShellScript/runShellScript/stdout | SSM standard output log file. | All |
| /var/lib/amazon/ssm/<instance_id>/document/orchestration/<execution_id>/awsrunShellScript/runShellScript/stderr | SSM standard error log file. | All |
| /var/log/shinesolutions/ssm-offline-compaction-snapshot.log | Log file for the SSM Output running the offline-compaction-snapshot. | author, publish, author-publish-dispatcher |
| /var/log/shinesolutions/ssm-offline-snapshot.log | Log file for the SSM Output running the offline-snapshot. | author, publish, author-publish-dispatcher |
| /var/log/shinesolutions/ssm-wait-until-service-ready.log | Log file for the SSM output wait until AEM service is ready. | author, publish |
| /var/log/shinesolutions/ssm-manage-service.log | Log file for the SSM output manging the AEM Service. | author, publish |
